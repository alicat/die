// Generated by CoffeeScript 1.3.3
var Die, build, config, server;

build = require('./build');

config = require('./config');

server = require('./server');

Die = (function() {

  function Die(options) {
    var key, val;
    if (options == null) {
      options = {};
    }
    for (key in options) {
      val = options[key];
      this.options[key] = val;
    }
    this.options.base = options.base || process.cwd();
    this.options = config.read(this.options, 'default');
  }

  Die.prototype.options = config.defaults;

  Die.prototype.build = function() {
    this.options = config.read(this.options, 'production');
    return build(this.options);
  };

  Die.prototype.createServer = function(func) {
    var app;
    app = server.createServer(this.options);
    server.extend(app, func);
    return app;
  };

  Die.prototype.run = function(func) {
    var app;
    app = this.createServer(func);
    return app.run();
  };

  return Die;

})();

module.exports = Die;
